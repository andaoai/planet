<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>天体图文 - 中国天文可视化应用</title>
  <script src="js/lib/lunar.js"></script>
  <script src="js/lib/vue3.js"></script>
  <script src="js/lib/astronomy.browser.js?ver=2.4"></script>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* 响应式布局样式 */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
      background-color: #1a1a1a;
      color: #e0e0e0;
      line-height: 1.6;
    }

    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background-color: #1a1a1a;
    }

    /* 主要内容区域 */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* 双画布容器样式 */
    .dual-canvas-container {
      display: flex;
      flex: 1;
      gap: 20px;
      padding: 10px;
      background-color: #0d0d0d;
      min-height: 60vh;
    }

    .canvas-section {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #0d0d0d;
      border-radius: 8px;
      border: 1px solid #404040;
      padding: 10px;
    }

    #my, #solar-system-canvas {
      border: 2px solid #404040;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
      background-color: #000;
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
    }

    /* 表单控件样式 */
    .checkbox-group {
      display: grid;
      gap: 8px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      padding: 6px 0;
      transition: background-color 0.2s;
      border-radius: 4px;
    }

    .checkbox-item:hover {
      background-color: #333333;
    }

    .checkbox-item input[type="checkbox"] {
      margin-right: 8px;
      transform: scale(1.1);
    }

    .checkbox-item label {
      cursor: pointer;
      font-size: 0.9rem;
      line-height: 1.4;
      color: #e0e0e0;
    }

    /* 按钮样式 */
    .button-group {
      display: flex;
      gap: 8px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
      flex: 1;
      min-width: 80px;
    }

    .btn-primary {
      background-color: #007bff;
      color: white;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #545b62;
    }

    /* 输入框样式 */
    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #b0b0b0;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #555555;
      border-radius: 4px;
      font-size: 0.9rem;
      background-color: #333333;
      color: #e0e0e0;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.25);
    }

    /* 位置输入组 */
    .location-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    /* 时间输入组 */
    .time-inputs {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .time-inputs input {
      width: 60px;
      padding: 6px 8px;
      border: 1px solid #555555;
      border-radius: 4px;
      text-align: center;
      background-color: #333333;
      color: #e0e0e0;
    }

    .time-span-input {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .time-span-input label {
      color: #e0e0e0;
      font-size: 0.9rem;
      min-width: 100px;
    }

    .time-span-input input {
      background-color: #404040;
      border: 1px solid #666;
      color: #e0e0e0;
      padding: 4px 6px;
      border-radius: 3px;
      font-size: 0.9rem;
    }

    .time-span-input select {
      background-color: #404040;
      border: 1px solid #666;
      color: #e0e0e0;
      padding: 4px 6px;
      border-radius: 3px;
      font-size: 0.9rem;
    }

    .time-span-input .hint {
      color: #888;
      font-size: 0.8rem;
      margin-left: 5px;
    }

    /* 快捷键说明 */
    .keyboard-shortcuts {
      background-color: #2d2d2d;
      border-radius: 4px;
      padding: 15px;
    }

    .keyboard-shortcuts h4 {
      color: #ff6b6b;
      margin-bottom: 10px;
      font-size: 1rem;
    }

    .keyboard-shortcuts ol {
      padding-left: 20px;
    }

    .keyboard-shortcuts li {
      margin-bottom: 8px;
      font-size: 0.85rem;
      line-height: 1.4;
      color: #e0e0e0;
    }

    /* 底部控制面板样式 */
    .bottom-nav {
      background-color: #242424;
      border-top: 2px solid #404040;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
      overflow-y: auto;
      max-height: 40vh;
    }

    .bottom-nav .control-section {
      padding: 15px 20px;
      border-bottom: 1px solid #404040;
    }

    .bottom-nav .control-section:last-child {
      border-bottom: none;
    }

    .bottom-nav .control-section h3 {
      color: #ff6b6b;
      margin-bottom: 12px;
      font-size: 1rem;
      font-weight: 600;
    }

    /* 时间控制布局 */
    .time-control-layout {
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }

    /* 历法布局容器 */
    .calendar-layout {
      flex: 0 0 750px;
      display: flex;
      flex-direction: row;
      gap: 10px;
    }

    /* 十月历区域 */
    .october-calendar-section {
      flex: 1;
      background-color: #2d2d2d;
      border-radius: 6px;
      padding: 12px;
      border: 1px solid #555555;
      min-width: 200px;
    }

    /* 农历区域 */
    .lunar-calendar-section {
      flex: 1;
      background-color: #2d2d2d;
      border-radius: 6px;
      padding: 12px;
      border: 1px solid #555555;
      min-width: 200px;
    }

    /* 斗建区域 */
    .doujian-calendar-section {
      flex: 1;
      background-color: #2d2d2d;
      border-radius: 6px;
      padding: 12px;
      border: 1px solid #555555;
      min-width: 200px;
    }

    /* 干支区域 */
    .ganzhi-calendar-section {
      flex: 1;
      background-color: #2d2d2d;
      border-radius: 6px;
      padding: 12px;
      border: 1px solid #555555;
      min-width: 200px;
    }

    .october-calendar-section h4,
    .lunar-calendar-section h4,
    .ganzhi-calendar-section h4,
    .doujian-calendar-section h4 {
      color: #ff6b6b;
      margin-bottom: 10px;
      font-size: 0.95rem;
      text-align: center;
      border-bottom: 1px solid #555555;
      padding-bottom: 6px;
    }

    .calendar-content {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .calendar-item {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 6px 8px;
      background-color: #404040;
      border-radius: 4px;
      border: 1px solid #666666;
    }

    .calendar-label {
      color: #ffd700;
      font-weight: bold;
      font-size: 0.95rem;
    }

    .calendar-day {
      color: #87ceeb;
      font-size: 0.9rem;
    }

    .calendar-total {
      color: #98fb98;
      font-size: 0.85rem;
    }

    .lunar-info {
      color: #dda0dd;
      font-size: 0.9rem;
    }

    .ganzhi-year {
      color: #ffd700;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .ganzhi-month {
      color: #87ceeb;
      font-size: 0.85rem;
    }

    .ganzhi-day {
      color: #98fb98;
      font-size: 0.85rem;
    }

    .ganzhi-hour {
      color: #f0e68c;
      font-size: 0.85rem;
    }

    /* 五行属性样式 */
    .wuxing-container {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.75rem;
      margin-left: 6px;
    }

    .wuxing-tiangan {
      color: #ffa500;
      font-weight: bold;
    }

    .wuxing-dizhi {
      color: #87ceeb;
      font-weight: bold;
    }

    .wuxing-separator {
      color: #888;
      font-size: 0.7rem;
    }

    /* 五行颜色 */
    .wuxing-wood { color: #228b22; }
    .wuxing-fire { color: #ff4500; }
    .wuxing-earth { color: #8b4513; }
    .wuxing-metal { color: #708090; }
    .wuxing-water { color: #4682b4; }

    .doujian-year {
      color: #ff6347;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .doujian-year-detail {
      color: #ffa500;
      font-size: 0.85rem;
    }

    .doujian-month {
      color: #20b2aa;
      font-size: 0.85rem;
    }

    /* 时间控制区域 */
    .time-control-section {
      flex: 1;
    }

    /* 时间控制组 */
    .time-control-group {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .time-control-group .time-inputs {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .time-control-group .time-inputs input {
      width: 50px;
      padding: 6px 8px;
      border: 1px solid #555555;
      border-radius: 4px;
      text-align: center;
      background-color: #333333;
      color: #e0e0e0;
      font-size: 0.9rem;
    }

    /* 年份输入框更宽，以支持五位数字（如公元前年份） */
    .time-control-group .time-inputs .year-input {
      width: 70px;
    }

    .time-control-group .time-inputs span {
      color: #b0b0b0;
      font-size: 0.85rem;
    }

    /* 控制选项网格 */
    .control-options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .control-group h4 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 0.95rem;
      font-weight: 600;
    }

    .checkbox-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .checkbox-row label {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e0e0e0;
      font-size: 0.85rem;
      cursor: pointer;
      transition: background-color 0.2s;
      padding: 4px 8px;
      border-radius: 3px;
    }

    .checkbox-row label:hover {
      background-color: #333333;
    }

    .checkbox-row input[type="checkbox"] {
      transform: scale(1.1);
    }

    /* 动画控制 */
    .animation-control {
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .animation-control label {
      color: #b0b0b0;
      font-size: 0.85rem;
      white-space: nowrap;
    }

    .animation-control select {
      padding: 6px 10px;
      border: 1px solid #555555;
      border-radius: 4px;
      background-color: #333333;
      color: #e0e0e0;
      font-size: 0.85rem;
    }

    /* 位置控制 */
    .location-controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .location-controls .location-inputs {
      display: flex;
      gap: 15px;
      justify-content: center;
      align-items: flex-end;
      flex-wrap: wrap;
    }

    .location-controls .form-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .location-controls .form-group label {
      color: #b0b0b0;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .location-controls .form-group input {
      padding: 6px 10px;
      border: 1px solid #555555;
      border-radius: 4px;
      background-color: #333333;
      color: #e0e0e0;
      font-size: 0.9rem;
      min-width: 80px;
    }

    .location-controls .button-group {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    /* 按钮样式 */
    .nav-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .nav-btn {
      padding: 8px 14px;
      border: 1px solid #555555;
      background-color: #333333;
      color: #e0e0e0;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.2s;
      min-width: 70px;
      white-space: nowrap;
    }

    .nav-btn:hover {
      background-color: #667eea;
      color: white;
      border-color: #667eea;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
      min-width: 80px;
    }

    .btn-primary {
      background-color: #007bff;
      color: white;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #545b62;
    }

    /* 滚动条样式 */
    .bottom-nav::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    .bottom-nav::-webkit-scrollbar-track {
      background: #2d2d2d;
    }

    .bottom-nav::-webkit-scrollbar-thumb {
      background: #555555;
      border-radius: 3px;
    }

    .bottom-nav::-webkit-scrollbar-thumb:hover {
      background: #6a6a6a;
    }

    /* 折叠面板 */
    .collapsible {
      cursor: pointer;
    }

    .collapsible-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .collapsible.active .collapsible-content {
      max-height: 1000px;
    }

    .collapsible.active h3::before {
      content: "📂";
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
      .app-container {
        flex-direction: column;
      }

      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .dual-canvas-container {
        flex-direction: column;
        gap: 10px;
        padding: 5px;
        min-height: 50vh;
      }

      .canvas-section {
        min-height: 200px;
        padding: 5px;
      }

      .control-options-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .checkbox-row {
        grid-template-columns: 1fr;
        gap: 6px;
      }

      .time-control-layout {
        flex-direction: column;
        gap: 15px;
      }

      .calendar-layout {
        flex: 0 0 auto;
        width: 100%;
        flex-direction: column;
        gap: 10px;
      }

      .time-control-group .time-inputs {
        gap: 5px;
      }

      .time-control-group .time-inputs input {
        width: 45px;
        font-size: 0.8rem;
      }

      .time-control-group .time-inputs .year-input {
        width: 60px;
      }

      .nav-buttons {
        gap: 6px;
      }

      .nav-btn {
        padding: 6px 10px;
        font-size: 0.75rem;
        min-width: 60px;
      }

      .location-controls .location-inputs {
        gap: 10px;
      }

      .bottom-nav {
        max-height: 50vh;
      }
    }

    /* 大屏幕优化 */
    @media (min-width: 1200px) {
      .dual-canvas-container {
        padding: 20px;
        gap: 30px;
      }

      .control-options-grid {
        grid-template-columns: repeat(4, 1fr);
      }

      .checkbox-row {
        grid-template-columns: repeat(2, 1fr);
      }
    }

      </style>
</head>

<body>
  <div id="app" class="app-container">
    <!-- 主要内容区域 -->
    <main class="main-content">
      <!-- 双画布容器 -->
      <div class="dual-canvas-container">
        <!-- 左侧：地球中心视图 -->
        <div class="canvas-section">
          <canvas id="my"></canvas>
        </div>

        <!-- 右侧：太阳系视图 -->
        <div class="canvas-section">
          <canvas id="solar-system-canvas"></canvas>
        </div>
      </div>

      <!-- 底部控制面板 -->
      <nav class="bottom-nav">

        <!-- 时间控制 -->
        <div class="control-section">
          <h3>时间控制</h3>
          <div class="time-control-layout">
            <!-- 左侧：历法信息 -->
            <div class="calendar-layout">
              <!-- 十月历 -->
              <div class="october-calendar-section" v-if="settings.s.show10Yueli && tiangan && octoberCalendar">
                <h4>十月历</h4>
                <div class="calendar-content">
                  <div class="calendar-item">
                    <span class="calendar-label">{{ tiangan[octoberCalendar.year] || '甲' }}年{{ tiangan[octoberCalendar.month] || '子' }}月</span>
                  </div>
                  <div class="calendar-item">
                    <span class="calendar-day">第{{ octoberCalendar.monthd || 1 }}天</span>
                  </div>
                  <div class="calendar-item">
                    <span class="calendar-total">总第{{ octoberCalendar.gy || 1 }}天</span>
                  </div>
                </div>
              </div>

              <!-- 斗建 -->
              <div class="doujian-calendar-section" v-if="settings.s.showDouJian && dizhi && doujianInfo">
                <h4>斗建</h4>
                <div class="calendar-content">
                  <div class="calendar-item">
                    <span class="doujian-year">年建：{{ dizhi[doujianInfo.year] || '未知' }}</span>
                  </div>
                  <div class="calendar-item">
                    <span class="doujian-year-detail">第{{ doujianInfo.dy || 0 }}天</span>
                  </div>
                  <div class="calendar-item">
                    <span class="doujian-month">月建：{{ dizhi[doujianInfo.month] || '未知' }}</span>
                  </div>
                </div>
              </div>

              <!-- 农历信息 -->
              <div class="lunar-calendar-section">
                <h4>农历</h4>
                <div class="calendar-content">
                  <div class="calendar-item">
                    <span class="lunar-info">{{ lunarInfo || '正月初一' }}</span>
                  </div>
                </div>
              </div>

              <!-- 干支历 -->
              <div class="ganzhi-calendar-section">
                <h4>干支历</h4>
                <div class="calendar-content">
                  <div class="calendar-item">
                    <span class="ganzhi-year">{{ ganzhiCalendar?.year || '甲子' }}年</span>
                    <span class="wuxing-container">
                      <span class="wuxing-tiangan" :class="'wuxing-' + ganzhiCalendar?.yearWuxing?.tiangan">
                        {{ ganzhiCalendar?.yearWuxing?.tiangan || '木' }}
                      </span>
                      <span class="wuxing-separator">|</span>
                      <span class="wuxing-dizhi" :class="'wuxing-' + ganzhiCalendar?.yearWuxing?.dizhi">
                        {{ ganzhiCalendar?.yearWuxing?.dizhi || '木' }}
                      </span>
                    </span>
                  </div>
                  <div class="calendar-item">
                    <span class="ganzhi-month">{{ ganzhiCalendar?.month || '甲子' }}月</span>
                    <span class="wuxing-container">
                      <span class="wuxing-tiangan" :class="'wuxing-' + ganzhiCalendar?.monthWuxing?.tiangan">
                        {{ ganzhiCalendar?.monthWuxing?.tiangan || '木' }}
                      </span>
                      <span class="wuxing-separator">|</span>
                      <span class="wuxing-dizhi" :class="'wuxing-' + ganzhiCalendar?.monthWuxing?.dizhi">
                        {{ ganzhiCalendar?.monthWuxing?.dizhi || '木' }}
                      </span>
                    </span>
                  </div>
                  <div class="calendar-item">
                    <span class="ganzhi-day">{{ ganzhiCalendar?.day || '甲子' }}日</span>
                    <span class="wuxing-container">
                      <span class="wuxing-tiangan" :class="'wuxing-' + ganzhiCalendar?.dayWuxing?.tiangan">
                        {{ ganzhiCalendar?.dayWuxing?.tiangan || '木' }}
                      </span>
                      <span class="wuxing-separator">|</span>
                      <span class="wuxing-dizhi" :class="'wuxing-' + ganzhiCalendar?.dayWuxing?.dizhi">
                        {{ ganzhiCalendar?.dayWuxing?.dizhi || '木' }}
                      </span>
                    </span>
                  </div>
                  <div class="calendar-item">
                    <span class="ganzhi-hour">{{ ganzhiCalendar?.time || '甲子' }}时辰</span>
                    <span class="wuxing-container">
                      <span class="wuxing-tiangan" :class="'wuxing-' + ganzhiCalendar?.timeWuxing?.tiangan">
                        {{ ganzhiCalendar?.timeWuxing?.tiangan || '木' }}
                      </span>
                      <span class="wuxing-separator">|</span>
                      <span class="wuxing-dizhi" :class="'wuxing-' + ganzhiCalendar?.timeWuxing?.dizhi">
                        {{ ganzhiCalendar?.timeWuxing?.dizhi || '木' }}
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- 右侧：时间控制 -->
            <div class="time-control-section">
              <div class="time-control-group">
                <div class="time-inputs">
                  <input type="number" :value="today.s.year" @input="nowProcess('year', $event.target.value)" placeholder="年" class="year-input">
                  <span>年</span>
                  <input type="number" :value="today.s.month" @input="nowProcess('month', $event.target.value)" placeholder="月" size="2">
                  <span>月</span>
                  <input type="number" :value="today.s.day" @input="nowProcess('day', $event.target.value)" placeholder="日" size="2">
                  <span>日</span>
                  <input type="number" :value="today.s.hour" @input="nowProcess('hour', $event.target.value)" placeholder="时" size="2">
                  <span>时</span>
                  <input type="number" :value="today.s.minute" @input="nowProcess('minute', $event.target.value)" placeholder="分" size="2">
                  <span>分</span>
                  <input type="number" :value="today.s.seconds" @input="nowProcess('seconds', $event.target.value)" placeholder="秒" size="2">
                  <span>秒</span>
                </div>
                <div class="nav-buttons">
                  <button class="nav-btn" @click="nextday(-1)">前一天 (J)</button>
                  <button class="nav-btn" @click="nextday(1)">后一天 (K)</button>
                  <button class="nav-btn" @click="nextHour(-1)">前1小时 (N)</button>
                  <button class="nav-btn" @click="nextHour(1)">后1小时 (M)</button>
                  <button class="nav-btn" @click="nextMinute(-1)">前1分钟 (D)</button>
                  <button class="nav-btn" @click="nextMinute(1)">后1分钟 (F)</button>
                  <button class="nav-btn" @click="now.value = new Date(); intIdx = makeInterval(); paint();">今天 (H)</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 显示选项 -->
        <div class="control-section">
          <h3>显示选项</h3>
          <div class="control-options-grid">
            <div class="control-group">
              <h4>基础显示</h4>
              <div class="checkbox-row">
                <label><input type="checkbox" v-model="settings.s.guijiMode"> 轨迹模式 (O)</label>
                <label><input type="checkbox" v-model="settings.s.faceMode"> 侧视图 (I)</label>
                <label><input type="checkbox" v-model="settings.s.showPlanetDistance"> 距离 (T)</label>
                <label><input type="checkbox" v-model="settings.s.showPlanetData"> 数据 (P)</label>
              </div>
            </div>

            <div class="control-group">
              <h4>太阳系视图</h4>
              <div class="checkbox-row">
                <label><input type="checkbox" v-model="solarSystemSettings.showOrbits" @change="updateSolarSystemSettings()"> 轨道</label>
                <label><input type="checkbox" v-model="solarSystemSettings.showLabels" @change="updateSolarSystemSettings()"> 标签</label>
                <label><input type="checkbox" v-model="solarSystemSettings.showCoords" @change="updateSolarSystemSettings()"> 坐标</label>
                <label><input type="checkbox" v-model="solarSystemSettings.showDizhi" @change="updateSolarSystemSettings()"> 十二地支</label>
              </div>
              <div class="animation-control">
                <label>动画速度：</label>
                <select v-model="solarSystemSettings.animationSpeed" @change="updateSolarSystemSettings()">
                  <option value="0">暂停</option>
                  <option value="1">1x</option>
                  <option value="10">10x</option>
                  <option value="100">100x</option>
                  <option value="1000">1000x</option>
                </select>
              </div>
            </div>

            <div class="control-group">
              <h4>历法显示</h4>
              <div class="checkbox-row">
                <label><input type="checkbox" v-model="settings.s.show24Jieqi"> 24节气</label>
                <label><input type="checkbox" v-model="settings.s.show24JieqiClockwise"> 顺时针 (L)</label>
                <label><input type="checkbox" v-model="settings.s.show28Xiu"> 28宿</label>
                <label><input type="checkbox" v-model="settings.s.showDouJian"> 斗建年</label>
                <label><input type="checkbox" v-model="settings.s.show10Yueli"> 十月历</label>
              </div>
            </div>

            <div class="control-group">
              <h4>高级设置</h4>
              <div class="checkbox-row">
                <label><input type="checkbox" v-model="settings.s.useEcliptic"> 黄道面 (Q)</label>
                <label><input type="checkbox" v-model="settings.s.southUp"> 正南朝上 (Y)</label>
                <label><input type="checkbox" v-model="settings.s.BeiDouFaceSouth"> 北斗面南 (W)</label>
                <label><input type="checkbox" v-model="settings.s.showLine"> 行星连线 (B)</label>
              </div>
            </div>

            <div class="control-group">
              <h4>时间设置</h4>
              <div class="time-span-input">
                <label>E/R 时间跨度：</label>
                <input type="number" v-model.number="timeSpan" min="0.1" step="0.1" size="6">
                <select v-model="timeUnit">
                  <option value="日">天</option>
                  <option value="月">月</option>
                  <option value="年">年</option>
                </select>
                <span class="hint">E后退，R前进</span>
              </div>
            </div>
          </div>
        </div>

        <!-- 观测位置 -->
        <div class="control-section">
          <h3>观测位置</h3>
          <div class="location-controls">
            <div class="location-inputs">
              <div class="form-group">
                <label>经度</label>
                <input type="number" v-model.number="position.s.longitude" step="0.0001" size="8">
              </div>
              <div class="form-group">
                <label>纬度</label>
                <input type="number" v-model.number="position.s.latitude" step="0.0001" size="8">
              </div>
              <div class="form-group">
                <label>海拔(m)</label>
                <input type="number" v-model.number="position.s.altitude" size="6">
              </div>
            </div>
            <div class="button-group">
              <button class="btn btn-primary" @click="savePosition()">保存位置</button>
              <button class="btn btn-secondary" @click="resetCanvas();paint()">刷新显示</button>
            </div>
          </div>
        </div>
      </nav>
    </main>
  </div>
  <script src="js/config.js"></script>
  <script src="js/solar-system.js"></script>
  <script src="js/earthObserver.js"></script>
</body>

</html>